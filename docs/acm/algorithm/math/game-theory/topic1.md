---
title: 算法笔记 | 博弈论
date: 2023-07-20 00:45:38
tags:
- 算法竞赛
- 博弈论
---

SG 函数

<!--more-->

## 博弈论简介

注：下面这段文字摘抄自 [OI-Wiki](https://oi-wiki.org/math/game-theory/intro/)

### 公平组合游戏

公平组合游戏（Impartial Game）的定义如下：

- 游戏有两个人参与，二者轮流做出决策，双方均知道游戏的完整信息；
- 任意一个游戏者在某一确定状态可以作出的决策集合只与当前的状态有关，而与游戏者无关；
- 游戏中的同一个状态不可能多次抵达，游戏以玩家无法行动为结束，且游戏一定会在有限步后以非平局结束。

### 非公平组合游戏

非公平组合游戏（Partizan Game）与公平组合游戏的区别在于在非公平组合游戏中，游戏者在某一确定状态可以做出的决策集合与游戏者有关。大部分的棋类游戏都 **不是** 公平组合游戏，如国际象棋、中国象棋、围棋、五子棋等（因为双方都不能使用对方的棋子）。

### 反常游戏

反常游戏（Misère Game）按照传统的游戏规则进行游戏，但是其胜者为第一个无法行动的玩家。以 Nim 游戏为例，Nim 游戏中取走最后一颗石子的为胜者，而反常 Nim 游戏中取走最后一刻石子的为败者。

---



本文主要研究公平组合游戏。

## SG 函数

我们通过 Nim 游戏来介绍 SG 函数，什么是 Nim 游戏呢？

Nim 游戏是一种两个人玩的回合制数学战略游戏。游戏者轮流从几排棋子（或者任何道具）中选择一排，再由这一排中取走一个或者多个，依规则不同，拿走最后一个的可能是输家，也有可能是赢家。（转自 [尼姆游戏](https://zh.wikipedia.org/zh-sg/%E5%B0%BC%E5%A7%86%E6%B8%B8%E6%88%8F)）

我们接下来定义一种函数 $SG(x)$，并且令 $SG(x):=mex\{SG(y)|x \to y\}$，这里 $x$，$y$ 均表示某种状态，$x \to y$ 表示 $x$ 可以通过一次操作到达 $y$，也可以理解为 $y$ 是 $x$ 的后继状态。$mex$ 表示一个集合中未出现的最小自然数（例如 $mex\{0, 1, 3\} = 2$ ）。如果 $SG(x) = n$，说明可以从当前状态转移到 $0\sim n - 1$ 的状态。

对于一个状态，如果它是必胜态，那么它移动一步，下一步一定**可以**变成必败态。如果一个状态是必败态，那么它无论怎么移动，它的下一步**只能**是必胜态。我们令 $SG(x) = 0$ 表示必败，$SG(x) \ne 0$ 表示必胜。那么 $SG(x) = 0$ 时说明下一步的状态 $y$ 全都是 $SG(y) \ne 0$，$SG(x) \ne 0$ 说明下一步存在状态 $y'$ 满足 $SG(y') \ne 0$。符合我们的胜败状态。

对于单堆的 Nim 游戏，不难证明 $SG(x) = x$，但是对于双堆，三堆，n 堆情况就很复杂。所以我们引入 **SG定理**。

**Sprague-Grundy定理**（两个游戏的情形）：

> 对于公平组合游戏的两个状态 $x$ 和 $y$，有 $SG(x + y) = SG(x) \oplus SG(y)$

推广的情形：

> 对于公平组合游戏的 $n$ 个状态 $x_1,x_2, \dots,x_n$，有 $SG(x_1 + x_2 + \cdots + x_n) = SG(x_1) \oplus SG(x_2) \oplus \cdots \oplus SG(x_n)$

定理具体证明见[这里](https://www.zhihu.com/question/51290443)。





## 参考文献

[公平组合游戏 - OI-Wiki](https://oi-wiki.org/math/game-theory/impartial-game/)

[算法学习笔记(51): SG函数 - Pecco - 知乎](https://zhuanlan.zhihu.com/p/257013159)
