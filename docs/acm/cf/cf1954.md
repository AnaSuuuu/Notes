# [Educational Codeforces Round 164 (Rated for Div. 2)](https://codeforces.com/contest/1954)

## [D. Colored Balls](https://codeforces.com/contest/1954/problem/D)

**Solution:**

  Let $f_{ij}$ be the total kinds of conditions when we use some of first i colored balls, and the sum of balls we used is j.

  Let's denote the max balls of all we used is k. If $k \ge j$, the contribution to the answer is j.
  Otherwise is $\left \lceil \dfrac{j}{2} \right \rceil$.

  In order to find the max number, we can sort the array a. And when we deal with the i-th balls, the max number must be $a_i$.

  If $a_i \ge j - a_i$, $answer += f_{i - 1, j - a_i} + a_i$.

  Otherwise $answer += f_{i - 1, j - a_i} + \left \lceil \dfrac{j}{2} \right \rceil$.
    
  And simultaneously, $f_{ij} += f_{i - 1, j - a_i}$.

  Finally we can optimize the first dimension, the time complexity is O($n \times \sum a_i$).


## [E. Chain Reaction](https://codeforces.com/contest/1954/problem/E)

**Solution:**

  Good problem.

  We can find that the answer depend on the mountain of the array.

  For the mountain of the subarray, how do we calculate the contribution to the answer?

  Let's denote $\left \lceil \dfrac{a_i}{k} \right \rceil$ be x. And we can find that either $x \le \sqrt{a_i}$ or $k \le \sqrt{a_i}$.
  So the x can be no more than $2\sqrt{a_i}$. Hence we can solve the problem with the complexity of $O(n \times \sqrt{A})$.

  And consider that for many ks, they share the same answer. So we can use a difference array to note the contribution to the answer.
  That is, for each x, we can find the $k_l$ and $k_r$, and modify the whole segment $[k_l, k_r]$ by adding x.

  But we can also find that we calculate the answer twice when we deal with the adjacent mount. So we should also sub the contribution of bottom.
  And the method is the same as above(just change the signal).

  Don't forget that, for each bottom and mountain, they can a difference for any k which is bigger than them.

